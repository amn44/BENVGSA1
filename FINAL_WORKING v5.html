<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Sports Participation in London</title> <!--  map title -->
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.css' rel='stylesheet' />
    <style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%;}

  .map-overlay {
      font: 12px/20px 'Helvetica Neue', Arial, Helvetica,sans-serif;
      position: fixed;
      width: 280px;
      top: 0;
      left: 0;
      padding: 10px;
            z-index: +1;
  }

 .map-overlay-inner {
      position: absolute;
      top: 5px;
      left: 5;
      background-color: rgba(255, 255, 255, 0.7);
      box-shadow:0 1px 2px rgba(255, 255, 255, 0.20);
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 10px;
      color: black;
     z-index: -1;
  }

  .key_fig { /* Sets the style for the key */
    background-color: #fff7fb;
    border-style: solid
    padding: 10px 24px;
    border-radius: 8px;
    color: black;
    padding: 5px 5px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    opacity: 0.7;
    display: block;
    border-color: black;
}
/* chnages the background colour to match the one used in the map */
.key_fig2 {background-color: #ece7f2;} 
.key_fig3 {background-color: #d0d1e6;}
.key_fig4 {background-color: #a6bddb;}
.key_fig5 {background-color: #74a9cf;}
.key_fig6 {background-color: #3690c0;}
.key_fig7 {background-color: #0570b0;}
.key_fig8 {background-color: #045a8d;}
.key_fig9 {background-color: #023858;}


.Key { /* sets the position of the key */
      font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
      position: absolute;
      display: block;
      bottom: 0;
      right: 0;
      background-color: rgba(136,136,136, 0.80);
      box-shadow:0 1px 2px rgba(255, 255, 255, 0.20);
      border-radius: 10px;
      padding: 5px;
      margin-right: 10px;
      margin-bottom: 20px;
      color: black;}

.Description-Box { /* sets the position and style of the description box */
      font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
      position: absolute;
      bottom: 0;
      left: 400px;
      right: 300px;
      background-color: rgba(255, 255, 255, 0.70);
      box-shadow:0 1px 2px rgba(255, 255, 255, 0.20);
      border-radius: 10px;
      padding: 5px;
      margin-bottom: 20px;
      color: black;}

    </style>
</head>
<body>


<div id='map'>

<div class='map-overlay top'>
    <div class='map-overlay-inner'>
        <h2>Sports Participation in London</h2> <!--  Map title -->
      <!--  Sets all the radio buttons -->
      <h2>Age</h2><!--  Sub title -->
      <input type="radio" name="layers" id="layer3" value="2005_16_25" checked><label>2005 16-25 years</label> 
      <input type="radio" name="layers" id="layer1" value="2015_16_25"><label>2015 16-25 years </label>
      <br>
      <input type="radio" name="layers" id="layer4" value="2005_45_54"><label>2005 45-54 years </label>
      <input type="radio" name="layers" id="layer2" value="2015_45_54"><label>2015 45-54 years </label>
      <h2>Ethnicity</h2> <!--  Sub title -->
      <input type="radio" name="layers" id="layer5" value="2005_White"><label> 2005  White </label>
      <input type="radio" name="layers" id="layer6" value="2005_BAME"><label> 2005  BAME </label>
      <br>
      <input type="radio" name="layers" id="layer7" value="2015_White"><label> 2015 White </label>
     <input type="radio" name="layers" id="layer8" value="2015_BAME"><label> 2015 BAME 
      <br>*BAME- Black, Asian and minority ethnic.</label> <!--  section description -->
     <h2>Gender</h2> <!--  Sub title -->
     <input type="radio" name="layers" id="layer9" value="2014_M_Act"><label>2014 Male Active</label>
     <input type="radio" name="layers" id="layer10" value="2014_F_Act"><label>2014 Female Active</label>
     <br>
     <input type="radio" name="layers" id="layer11" value="2014_M_Ina"><label>2014 Male Inactive</label>
     <input type="radio" name="layers" id="layer12" value="2014_F_Ina"><label>2014 Female Inactive</label>
     <br>
     <h2>   Activity</h2> <!--  Sub title -->
     <input type="radio" name="layers" id="layer13" value="1516_M_1x3"><label>2015 Male 1x30 mins session per week</label>
     <br>
     <input type="radio" name="layers" id="layer14" value="1516_F_1x3"><label>2015 Female 1x30 mins session per week</label>
     <br>
     <input type="radio" name="layers" id="layer15" value="1516_M_3x3"><label>2015 Male 3x30 mins session per week</label>
     <br>
     <input type="radio" name="layers" id="layer16" value="1516_F_3x3"><label>2015 Female 3x30 mins session per week</label>
     <br>
     <!--  adds the data source image -->
    <img src="http://craigwhittakermp.co.uk/wp-content/uploads/2017/12/Sport20England.jpg" 
    style="width:100%;height:50%;image-rendering:-webkit-optimize-contrast;" >
    <!--   sets references on the map -->
         <p class="credit">Data: Sport England Active People Survey. Cartography: <a href="https://data.london.gov.uk/dataset/statistical-gis-boundary-files-london">London Datastore</a>.</p>
</div>
</div>
</div>
    <!--   sets the map legend -->
    <div class='Key'>
    <center><h2>Key</h2></center>
    <center><button class='key_fig'> No Data</button></center> 
    <center><button class='key_fig key_fig2'>  <  10%  </button></center>
    <button class='key_fig key_fig3'> 11% - 20% </button>
    <button class='key_fig key_fig4'> 21% - 30% </button>
    <button class='key_fig key_fig5'> 31% - 40% </button>
    <button class='key_fig key_fig6'> 41% - 50% </button>
    <button class='key_fig key_fig7'> 51% - 60% </button> 
    <button class='key_fig key_fig8'> 61% - 70% </button>  
    <button class='key_fig key_fig9'> 71% - 80% </button>      
    </div>
    <!--   sets the discription box with an inital starting narrative -->
    <div class='Description-Box'>
        <p style="margin-top:0px;"> <label id='narrative'>Welcome to this map! Please feel free to explore the variables on the left had side to understand participation in sport in London.</p></label>
    </div>

    <!--  MAP DIV -->
    </div>


    <script>


    mapboxgl.accessToken = 'pk.eyJ1IjoiaGFubmFoZ3VtYmxlIiwiYSI6ImNqY2oweWtibDJzbmszM3JxemlncXo5ZDAifQ.h-gteOJJaIq4GxkctofuOg'; //Mapbox Public Access token here

    var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/hannahgumble/cjh8wym0o2ht02smwx2k99cex', // stylesheet location
    center: [-0.163, 51.439], // starting position
    zoom: 9.1 // starting zoom
    });


    map.on('load', function() {
      map.addControl(new mapboxgl.NavigationControl()); //Adds navigation Controls
      map.scrollZoom.disable(); //Disables scroll zoom

     // Load the participation data
      map.addLayer({
        id: '2015_16_25', //has the same ID as the button
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r' // Mapbox Tileset ID
        },
        'source-layer': 'Sports_Data-bzkfs7', // Tilesets
          'paint': {
            'fill-color':{
            property: '2015_16_25',
            type: 'interval', // interval method for filling the color
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0, //Loads the layer as clear
             }
            }
      );

      map.addLayer({
        id: '2015_45_54',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2015_45_54',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2005_16_25',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2005_16_25',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.7,
             }
            }
      );
      map.addLayer({
        id: '2005_45_54',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r' 
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2005_45_54',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2005_White',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2005_White',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2005_BAME',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2005_BAME',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2015_White',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2015_White',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2015_BAME',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r' 
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2015_BAME',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2014_M_Act',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2014_M_Act',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2014_F_Act',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2014_F_Act',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2014_M_Ina',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7', 
          'paint': {
            'fill-color':{
            property: '2014_M_Ina',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '2014_F_Ina',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '2014_F_Ina',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '1516_M_1x3',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7', 
          'paint': {
            'fill-color':{
            property: '1516_M_1x3',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '1516_F_1x3',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r' 
        },
        'source-layer': 'Sports_Data-bzkfs7', 
          'paint': {
            'fill-color':{
            property: '1516_F_1x3',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '1516_M_3x3',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r'
        },
        'source-layer': 'Sports_Data-bzkfs7', 
          'paint': {
            'fill-color':{
            property: '1516_M_3x3',
            type: 'interval',
            stops: [
               [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );
      map.addLayer({
        id: '1516_F_3x3',
        type: 'fill',
        source: {
          type: 'vector',
          url: 'mapbox://hannahgumble.334cze9r' 
        },
        'source-layer': 'Sports_Data-bzkfs7',
          'paint': {
            'fill-color':{
            property: '1516_F_3x3',
            type: 'interval',
            stops: [
                [0.0, '#fff7fb'],
                [0.1, '#ece7f2'],
                [0.2, '#d0d1e6'],
                [0.3, '#a6bddb'],
                [0.4, '#74a9cf'],
                [0.5, '#3690c0'],
                [0.6, '#0570b0'],
                [0.7, '#045a8d'],
                [0.8, '#023858'],
                ]
                },
            'fill-opacity': 0.0,
             }
            }
      );

//Event listener for layer switch - sets the fill opacity as clear for all the layers that dont want to been seen
document.getElementById("layer1").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0.7);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
// shows narrative to accompany the layer being shown
document.getElementById('narrative').innerHTML = "Looking at the total participation by age data for 16 to 25 year olds in 2015 highlights that the highest participation rate is in Wandsworth, with 74% of 16 to 25 year olds taking part in sport. The lowest participation rate is at 42% in Newham.";
});

document.getElementById("layer2").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0.7);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "The average participation rate for 45-54 year olds in sport across London is 34%. The highest participation rate can be seen in Richmond upon Thames at 61%, with the lowest in Brent at 25%.";
});

document.getElementById("layer3").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0.7);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "Total Participation by age in 2005 highlights that Islington has the lowest participation for 16-26 years old at 67%, whereas Richmond upon Thames, Kingston upon Thames and Sutton have the highest at 67%, 66% and 60% respectively.";
});

document.getElementById("layer4").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0.7);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "Overall less people aged 45- 54 participate less in sport that those aged 16-25. The lowest participation rate is in Hillingdon at 22%. The highest participation rate was in Richmond upon Thames at 44%.";
});

document.getElementById("layer5").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0.7);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "The average participation across London in 2005 was 35%. Richmond upon Thames, Kingston upon Thames and Wandsworth have the highest participation rates at 46%, 43% and 42% respectively. The lowest participation rate can be identified in Newham at 23%.";
});

document.getElementById("layer6").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0.7);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "Kensington and Chelsea have the highest participation rate in sport at 48%, with the average across London being 35%. Newham and Brent have the lowest participation rates at 29%.";
});

document.getElementById("layer7").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0.7);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "Average participation rate across London is 40%. Wandsworth has the highest participation rate at 52% followed by Richmond upon Thames at 50%. New has the lowest participation rate at 26%.";
});

document.getElementById("layer8").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0.7);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "Ethnic Minority groups participate at an average of 35% in London. The highest participation rate is in Richmond upon Thames at 54% and the lowest participation rate is in Barking and Dagenham at 23%.";
});

document.getElementById("layer9").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0.7);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "In 2014 63% of the male population were classed as active, completing 150 minuets of sport a week. The highest proportion of active male populations were Richmond Upon Thames at 77% and Southwark and Hammersmith and Fulham at 71%. The lowest boroughs were Newham and Redbridge at 57%, 6% below the average for England.";
});

document.getElementById("layer10").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0.7);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "In 2014 53% of the female population across London were classed as active. In Richmond upon Thames, 66% of the female population were classed as active, whereas only 41% were classed as active in Redbridge.";
});

document.getElementById("layer11").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0.7);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "An Inactive person participates in less than 30 minuets of sport per week, in London 23% of the male population were inactive. The largest proportion of inactive males were located in Barking and Dagenham (39%), whereas Camden only had 16% of the male population who were inactive.";
});

document.getElementById("layer12").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0.7);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "An Inactive person participates in less than 30 minuets of sport per week. In 2014 Brent had the highest proportion of inactive females at 39%, 8% above the average for London. Richmond Upon Thames has the lowest amount of Inactive females at 17%.";
});

document.getElementById("layer13").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0.7);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "Wandsworth has the highest proportion of males that participate in 1 30 minute activity a week at 61% followed by 59 % in Richmond Upon Thames. The average for London is 43%. Brent lies 17% below this at 26%.";
});

document.getElementById("layer14").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0.7);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "In London 33% of females participate in 1 30 minute activity a week. Kensington and Chelsea has the highest proportion at 44% followed by Westminster and Richmond Upon Thames at 61%. The lowest female activity was recorded in Barking and Dagenham at 20%.";
});

document.getElementById("layer15").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0.7);
map.setPaintProperty('1516_F_3x3','fill-opacity',0);
document.getElementById('narrative').innerHTML = "In London 22% of Males participate in 3 30 minute session of sport per week. Merton and Wandsorth are 10% above the Average for London at 33%, whereas, in Redbridge, only 14% of Males participate in 3 30 minute session of sport per week.";
});

document.getElementById("layer16").addEventListener("click", function(){
map.setPaintProperty('2015_16_25','fill-opacity',0);
map.setPaintProperty('2015_45_54','fill-opacity',0);
map.setPaintProperty('2005_16_25','fill-opacity',0);
map.setPaintProperty('2005_45_54','fill-opacity',0);
map.setPaintProperty('2005_White','fill-opacity',0);
map.setPaintProperty('2005_BAME','fill-opacity',0);
map.setPaintProperty('2015_White','fill-opacity',0);
map.setPaintProperty('2015_BAME','fill-opacity',0);
map.setPaintProperty('2014_M_Act','fill-opacity',0);
map.setPaintProperty('2014_F_Act','fill-opacity',0);
map.setPaintProperty('2014_M_Ina','fill-opacity',0);
map.setPaintProperty('2014_F_Ina','fill-opacity',0);
map.setPaintProperty('1516_M_1x3','fill-opacity',0);
map.setPaintProperty('1516_F_1x3','fill-opacity',0);
map.setPaintProperty('1516_M_3x3','fill-opacity',0);
map.setPaintProperty('1516_F_3x3','fill-opacity',0.7);
document.getElementById('narrative').innerHTML = "An average of 13% of females in London participate in 3 30 minute session of sport per week. The Boroughs with the lowest participation are Sutton and Barking and Dagenham at 9%, whereas, in Kensington and Chelsea, 29% of females participate in 3 30 minute session of sport per week.";
});

// Displays brough name when clicked in popup
    map.on('click', '2015_16_25', function (e) {
        new mapboxgl.Popup()
            .setLngLat(e.lngLat)
            .setHTML(e.features[0].properties.NAME)
            .addTo(map);
    });

    map.on('mouseenter', '2015_16_25', function () {
        map.getCanvas().style.cursor = 'pointer';
    });

    map.on('mouseleave', '2015_16_25', function () {
        map.getCanvas().style.cursor = '';
    });

});


</script>

</body>
</html>
